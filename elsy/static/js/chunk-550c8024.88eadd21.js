(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-550c8024"],{"11e9":function(t,e,n){var r=n("52a7"),a=n("4630"),i=n("6821"),o=n("6a99"),s=n("69a8"),c=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=i(t),e=o(e,!0),c)try{return l(t,e)}catch(n){}if(s(t,e))return a(!r.f.call(t,e),t[e])}},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),a=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},4068:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"jalurd3"}},[n("v-navigation-drawer",{attrs:{dark:"",app:"",id:"jalurd3-nav"}},[n("v-toolbar",{attrs:{text:"",dark:""}},[n("v-toolbar-title",{staticClass:"subtitle"},[t._v("Editor Peta")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{icon:"",to:"/admin/setup"}},[n("v-icon",[t._v("mdi-rocket")])],1)],1)],1),n("v-layout",{staticClass:"mb-0",attrs:{"align-center":"","justify-center":""}},[n("v-btn-toggle",{staticClass:"my-3",attrs:{light:"",rounded:"",color:"green darken-1",mandatory:""},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[n("v-btn",{attrs:{value:"view"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-chart-timeline-variant")])],1),n("v-btn",{attrs:{value:"create-route"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-chart-timeline-variant")])],1),n("v-btn",{attrs:{value:"create-intersection"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-star-three-points")])],1)],1)],1),n("div",{staticClass:"body-2 text-xs-center pa-4 py-0 white--text font-weight-bold"},[t._v("\n      "+t._s(t.currentModeTitle)+"\n    ")]),"view"==t.mode?n("div",["node"==t.viewModeType?n("div",{staticClass:"grey darken-3 white--text"},[n("node-form",{attrs:{item:t.node}}),n("v-btn",{staticClass:"ml-4 my-2",attrs:{dark:"",outlined:"",small:"",color:"pink"},on:{click:t.deleteIntersection}},[t._v("delete")])],1):t._e(),"edge"==t.viewModeType?n("div",{staticClass:"pl-3 grey darken-3 white--text py-2"},[n("div",{staticClass:"body-2"},[t._v("Start")]),n("div",{staticClass:"pl-4 py-2"},[n("div",{staticClass:"caption mb-2"},[t._v("Lat: "+t._s(t.edge.a.latitde))]),n("div",{staticClass:"caption mb-2"},[t._v("Lng: "+t._s(t.edge.a.longitude))])]),n("div",{staticClass:"body-2"},[t._v("End")]),n("div",{staticClass:"pl-4 py-2"},[n("div",{staticClass:"caption mb-2"},[t._v("Lat: "+t._s(t.edge.b.latitde))]),n("div",{staticClass:"caption mb-2"},[t._v("Lng: "+t._s(t.edge.b.longitude))])]),n("div",{staticClass:"body-2 mb-2"},[t._v("Jarak: "+t._s(t.edge.length)+"m")]),n("v-btn",{attrs:{dark:"",outlined:"",small:"",color:"red"},on:{click:t.deleteRoute}},[t._v("Hapus")])],1):t._e()]):t._e(),"create-route"==t.mode?n("div",{attrs:{id:"create-route"}},[n("route-form",{attrs:{a:t.routes.a,b:t.routes.b,length:t.routes.length},on:{save:t.addRoute,reset:t.resetCreateNodeForm}})],1):t._e(),"create-intersection"==t.mode?n("div",{staticClass:"grey darken-4 white--text"},[n("div",{staticClass:"py-2 pl-4"},[n("div",{staticClass:"caption my-2"},[t._v("Lat: "+t._s(t.newIntersection.latitude))]),n("div",{staticClass:"caption"},[t._v("Lng: "+t._s(t.newIntersection.longitude))]),n("v-btn",{staticClass:"mt-2",attrs:{dark:"",outlined:"",small:""},on:{click:t.addIntersection}},[t._v("Save")])],1)]):t._e()],1),t._m(0)],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100vh"},attrs:{id:"map-container"}},[n("div",{staticStyle:{height:"100%"},attrs:{id:"jalurd3-gmap"}})])}],i=(n("8e6e"),n("456d"),n("bd86")),o=(n("ac6a"),n("a745")),s=n.n(o);function c(t){if(s()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var l=n("774e"),d=n.n(l),u=n("c8bb"),v=n.n(u);function f(t){if(v()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return d()(t)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return c(t)||f(t)||h()}n("7514"),n("96cf");var b=n("3b8d"),m=n("0817"),g=n("1b15"),y=n("da7e"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:"",tile:""}},[n("v-toolbar",{attrs:{dense:""}},[n("v-toolbar-title",{staticClass:"body-2"},[t._v("Node A")]),n("v-spacer")],1),void 0!=t.a?n("node-form",{attrs:{item:t.a}}):t._e(),n("v-toolbar",{attrs:{dense:""}},[n("v-toolbar-title",{staticClass:"body-2"},[t._v("Node B")]),n("v-spacer")],1),void 0!=t.b?n("node-form",{attrs:{item:t.b}}):t._e(),n("v-divider"),n("v-card-text",{staticClass:"py-0"},[n("v-text-field",{attrs:{type:"number",label:"Jarak",flat:"",value:t.length,readonly:""}})],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",dark:"",color:"blue"},on:{click:t.save}},[t._v("Save")]),n("v-btn",{attrs:{text:"",dark:"",color:"pink"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Reset")])],1)],1)},O=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"py-2 pl-4"},[n("div",[n("span",{staticClass:"caption text-uppercase"},[t._v("\n      "+t._s("intersection"==t.item.jabatan?t.item.jabatan:t.item.jabatan+" - "+t.item.lokasiJabatan)+"\n    ")]),n("span",{staticClass:"caption ml-2"},[t._v(t._s(t.item.nama))])]),n("div",{staticClass:"caption my-2"},[t._v("Lat: "+t._s(t.item.latitude))]),n("div",{staticClass:"caption"},[t._v("Lng: "+t._s(t.item.longitude))])])},j=[],x={name:"NodeForm",props:["item"]},C=x,L=n("2877"),S=Object(L["a"])(C,_,j,!1,null,null,null),k=S.exports,T={name:"RouteForm",components:{NodeForm:k},props:["a","b","length"],methods:{save:function(){void 0!=this.a&&void 0!=this.b||this.$emit("invalid");var t={a:this.a,b:this.b,length:this.length};this.$emit("save",t)}}},E=T,I=n("6544"),P=n.n(I),N=n("8336"),V=n("b0af"),R=n("99d9"),$=n("ce7e"),A=n("9910"),D=n("8654"),M=n("71d9"),F=n("2a7f"),B=Object(L["a"])(E,w,O,!1,null,null,null),H=B.exports;function J(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(n,!0).forEach(function(e){Object(i["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}P()(B,{VBtn:N["a"],VCard:V["a"],VCardActions:R["a"],VCardText:R["b"],VDivider:$["a"],VSpacer:A["a"],VTextField:D["a"],VToolbar:M["a"],VToolbarTitle:F["b"]});var Y={name:"JalurD3",components:{NodeForm:k,RouteForm:H},map:void 0,data:function(){return{items:[],edges:[],routes:{a:void 0,b:void 0,length:0},mode:"view",viewModeType:"node",node:Object(y["b"])(),edge:Object(y["a"])(),newIntersection:{latitude:0,longitude:0}}},methods:{reload:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["b"].find({jabatan:"all"});case 2:return e=t.sent,t.next=5,m["b"].find({jabatan:"intersection"});case 5:return n=t.sent,t.next=8,m["a"].find({});case 8:r=t.sent,a=[].concat(p(e),p(n)),r.forEach(function(t){console.log(t)}),this.map.removeAll(),this.map.addEdges(r),this.map.addNodes(a);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addNodeToRoutes:function(t){if(void 0==this.routes.a)this.routes.a=G({},t);else if(void 0==this.routes.b){this.routes.b=G({},t);var e=[this.routes.a.latitude,this.routes.a.longitude],n=[this.routes.b.latitude,this.routes.b.longitude],r=Object(g["b"])(e,n);this.routes.length=r}},addRoute:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={aId:e.a._id,bId:e.b._id,a:{latitude:e.a.latitude,longitude:e.a.longitude},b:{latitude:e.b.latitude,longitude:e.b.longitude},length:e.length},t.prev=1,t.next=4,m["a"].create(n);case 4:return t.prev=4,this.resetCreateNodeForm(),this.reload(),t.finish(4);case 8:case"end":return t.stop()}},t,this,[[1,,4,8]])}));function e(e){return t.apply(this,arguments)}return e}(),resetCreateNodeForm:function(){this.routes.a=void 0,this.routes.b=void 0},deleteRoute:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m["a"].delete({id:this.edge._id});case 3:return t.prev=3,this.reload(),t.finish(3);case 6:case"end":return t.stop()}},t,this,[[0,,3,6]])}));function e(){return t.apply(this,arguments)}return e}(),addIntersection:function(){var t=this,e=[this.newIntersection.latitude,this.newIntersection.longitude];m["b"].createIntersection({point:e}).then(function(){return t.reload()})},deleteIntersection:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m["b"].delete({id:this.node._id});case 3:return t.prev=3,this.reload(),t.finish(3);case 6:case"end":return t.stop()}},t,this,[[0,,3,6]])}));function e(){return t.apply(this,arguments)}return e}()},computed:{currentModeTitle:function(){switch(this.mode){case"view":return"Viewer";case"create-intersection":return"Buat Interseksi";case"create-route":return"Buat Rute";default:return""}}},mounted:function(){var t=this;this.map=new g["a"],this.map.init("jalurd3-gmap"),this.map.addSvgListener(function(e){var n=t.mode;switch(n){case"view":void 0!=e.jabatan?(t.viewModeType="node",t.node=G({},e)):(t.viewModeType="edge",console.log(e),t.edge=G({},e));break;case"create-route":t.addNodeToRoutes(e);break;default:break}}),this.map.addLeafletListener(function(e){"create-intersection"==t.mode&&(t.newIntersection.latitude=e.latlng.lat,t.newIntersection.longitude=e.latlng.lng)}),this.reload()}},q=Y,z=(n("735a"),n("7e58"),n("3860")),Z=n("a9ad"),K=n("58df"),U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X=Object(K["a"])(z["a"],Z["a"]).extend({name:"v-btn-toggle",props:{rounded:Boolean},computed:{classes:function(){return U({},z["a"].options.computed.classes.call(this),{"v-btn-toggle":!0,"v-btn-toggle--rounded":this.rounded},this.themeClasses)}},methods:{genData:function(){return this.setTextColor(this.color,U({},z["a"].options.methods.genData.call(this)))}}}),Q=n("132d"),W=n("a722"),tt=n("f774"),et=Object(L["a"])(q,r,a,!1,null,null,null);e["default"]=et.exports;P()(et,{VBtn:N["a"],VBtnToggle:X,VIcon:Q["a"],VLayout:W["a"],VNavigationDrawer:tt["a"],VSpacer:A["a"],VToolbar:M["a"],VToolbarItems:F["a"],VToolbarTitle:F["b"]})},4417:function(t,e,n){},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",function(){return function(t){return a(r(t))}})},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"549b":function(t,e,n){"use strict";var r=n("d864"),a=n("63b6"),i=n("241e"),o=n("b0dc"),s=n("3702"),c=n("b447"),l=n("20fd"),d=n("7cd6");a(a.S+a.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,u,v=i(t),f="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,b=void 0!==p,m=0,g=d(v);if(b&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==g||f==Array&&s(g))for(e=c(v.length),n=new f(e);e>m;m++)l(n,m,b?p(v[m],m):v[m]);else for(u=g.call(v),n=new f;!(a=u.next()).done;m++)l(n,m,b?o(u,p,[a.value,m],!0):a.value);return n.length=m,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"5eda":function(t,e,n){var r=n("5ca1"),a=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},"735a":function(t,e,n){"use strict";var r=n("4417"),a=n.n(r);a.a},"774e":function(t,e,n){t.exports=n("d2d5")},"7e58":function(t,e,n){},"85f2":function(t,e,n){t.exports=n("454f")},"8ce9":function(t,e,n){},"8e6e":function(t,e,n){var r=n("5ca1"),a=n("990b"),i=n("6821"),o=n("11e9"),s=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),c=o.f,l=a(r),d={},u=0;while(l.length>u)n=c(r,e=l[u++]),void 0!==n&&s(d,e,n);return d}})},9093:function(t,e,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"95d5":function(t,e,n){var r=n("40c3"),a=n("5168")("iterator"),i=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(r(e))}},"990b":function(t,e,n){var r=n("9093"),a=n("2621"),i=n("cb7c"),o=n("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(i(t)),n=a.f;return n?e.concat(n(t)):e}},"99d9":function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("80d2"),a=n("b0af"),i=Object(r["g"])("v-card__actions"),o=Object(r["g"])("v-card__text"),s=Object(r["g"])("v-card__title");a["a"]},a745:function(t,e,n){t.exports=n("f410")},ac6a:function(t,e,n){for(var r=n("cadf"),a=n("0d58"),i=n("2aba"),o=n("7726"),s=n("32e9"),c=n("84f2"),l=n("2b4c"),d=l("iterator"),u=l("toStringTag"),v=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(f),p=0;p<h.length;p++){var b,m=h[p],g=f[m],y=o[m],w=y&&y.prototype;if(w&&(w[d]||s(w,d,v),w[u]||s(w,u,m),c[m]=v,g))for(b in r)w[b]||i(w,b,r[b],!0)}},bd86:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("85f2"),a=n.n(r);function i(t,e,n){return e in t?a()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},c8bb:function(t,e,n){t.exports=n("54a1")},ce7e:function(t,e,n){"use strict";n("8ce9");var r=n("7560"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["a"]=r["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e=void 0;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:a({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:a({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},da7e:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a});var r=function(){return{_id:"",nama:"",alamat:"",jabatan:"rt",lokasiJabatan:"01",longitude:0,latitude:0}},a=function(){return{_id:void 0,a:{longitude:0,latitude:0},b:{longitude:0,latitude:0},aId:void 0,bId:void 0,length:0}}},e707:function(t,e,n){"use strict";var r=n("a797"),a=r["a"],i=n("80d2"),o=n("2b0e");e["a"]=o["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean},data:function(){return{overlay:null}},watch:{hideOverlay:function(t){t?this.removeOverlay():this.genOverlay()}},beforeDestroy:function(){this.removeOverlay()},methods:{createOverlay:function(){var t=new a({propsData:{absolute:this.absolute,value:!1}});t.$mount();var e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay:function(){var t=this;if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),requestAnimationFrame(function(){t.overlay&&(void 0!==t.activeZIndex&&(t.overlay.zIndex=String(t.activeZIndex-1)),t.overlay.value=!0)}),!0},removeOverlay:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.overlay&&(Object(i["a"])(this.overlay.$el,"transitionend",function(){t.overlay&&t.overlay.$el&&t.overlay.$el.parentNode&&(t.overlay.$el.parentNode.removeChild(t.overlay.$el),t.overlay.$destroy(),t.overlay=null)}),this.overlay.value=!1),e&&this.showScroll()},scrollListener:function(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;var e=[i["r"].up,i["r"].pageup],n=[i["r"].down,i["r"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!n.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar:function(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t);return["auto","scroll"].includes(e.overflowY)&&t.scrollHeight>t.clientHeight},shouldScroll:function(t,e){return 0===t.scrollTop&&e<0||t.scrollTop+t.clientHeight===t.scrollHeight&&e>0},isInside:function(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath:function(t){var e=t.path||this.composedPath(t),n=t.deltaY;if("keydown"===t.type&&e[0]===document.body){var r=this.$refs.dialog,a=window.getSelection().anchorNode;return!(r&&this.hasScrollbar(r)&&this.isInside(a,r))||this.shouldScroll(r,n)}for(var i=0;i<e.length;i++){var o=e[i];if(o===document)return!0;if(o===document.documentElement)return!0;if(o===this.$refs.content)return!0;if(this.hasScrollbar(o))return this.shouldScroll(o,n)}return!0},composedPath:function(t){if(t.composedPath)return t.composedPath();var e=[],n=t.target;while(n){if(e.push(n),"HTML"===n.tagName)return e.push(document),e.push(window),e;n=n.parentElement}return e},hideScroll:function(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(i["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll:function(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}})},f1ae:function(t,e,n){"use strict";var r=n("86cc"),a=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-550c8024.88eadd21.js.map